<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Backend</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/images/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/favicons/favicon-16x16.png">
    <link rel="manifest" href="/images/favicons/site.webmanifest">
    <link rel="mask-icon" href="/images/favicons/safari-pinned-tab.svg" color="#5851d8">
    <link rel="shortcut icon" href="/images/favicons/favicon.ico">
    <meta name="description" content="Origin is an app made in Laravel, JavaScript(jQuery & VueJS)">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-config" content="/images/favicons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <link rel="preload" href="/assets/css/0.styles.05eb7892.css" as="style"><link rel="preload" href="/assets/js/app.a6c98a68.js" as="script"><link rel="preload" href="/assets/js/2.ded731a5.js" as="script"><link rel="preload" href="/assets/js/11.d11e355d.js" as="script"><link rel="prefetch" href="/assets/js/10.6ac81df9.js"><link rel="prefetch" href="/assets/js/12.e1c9de7b.js"><link rel="prefetch" href="/assets/js/13.31c4ff6b.js"><link rel="prefetch" href="/assets/js/14.75ccf7db.js"><link rel="prefetch" href="/assets/js/15.f3d0df83.js"><link rel="prefetch" href="/assets/js/16.875321da.js"><link rel="prefetch" href="/assets/js/17.05bbf524.js"><link rel="prefetch" href="/assets/js/18.21d4f64a.js"><link rel="prefetch" href="/assets/js/3.48227b6d.js"><link rel="prefetch" href="/assets/js/4.54facabd.js"><link rel="prefetch" href="/assets/js/5.6fdd2fc8.js"><link rel="prefetch" href="/assets/js/6.392fdc86.js"><link rel="prefetch" href="/assets/js/7.4bb31ca5.js"><link rel="prefetch" href="/assets/js/8.af7e4cf0.js"><link rel="prefetch" href="/assets/js/9.ced3907c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.05eb7892.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/images/origin-logo.png" alt="" class="logo"> <!----></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="https://192.168.1.197:10000" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Webmin
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="http://192.168.1.197/rm/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Website
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="https://192.168.1.197:10000" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Webmin
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="http://192.168.1.197/rm/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Website
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/" aria-current="page" class="sidebar-link">Вовед</a></li><li><a href="/installation.html" class="sidebar-link">Installation</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>User Guide</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/dashboard.html" class="sidebar-link">Dashboard</a></li><li><a href="/guide/access.html" class="sidebar-link">Access | Пристап</a></li><li><a href="/guide/clients.html" class="sidebar-link">Clients</a></li></ul></section></li><li><a href="/api-documentation.html" class="sidebar-link">API Documentation</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Developer Guide</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/installation.html" class="sidebar-link">Installation</a></li><li><a href="/guide/routes.html" class="sidebar-link">Routes</a></li><li><a href="/guide/backend.html" aria-current="page" class="active sidebar-link">Backend</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/backend.html#controllers" class="sidebar-link">Controllers</a></li><li class="sidebar-sub-header"><a href="/guide/backend.html#models" class="sidebar-link">Models</a></li></ul></li><li><a href="/guide/frontend.html" class="sidebar-link">Frontend</a></li><li><a href="/guide/database.html" class="sidebar-link">Database</a></li><li><a href="/guide/access-control.html" class="sidebar-link">Access Control</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="backend"><a href="#backend" class="header-anchor">#</a> Backend</h1> <h2 id="controllers"><a href="#controllers" class="header-anchor">#</a> Controllers</h2> <p>All of the controllers live in the default Laravel controller location of app\Http\Controllers and follow a namespacing convention of the folders they're in.</p> <h4 id="backend-auth-role-rolecontroller"><a href="#backend-auth-role-rolecontroller" class="header-anchor">#</a> Backend/Auth/Role/RoleController</h4> <p><em>This controller return response from <code>index()</code> method with all existing roles.
<code>create()</code> method return view for creating new role, with all permissions (if are created).
<code>store()</code> method insert data to associated tables.
<code>edit()</code> to hit that method user need to be admin or has permissions to edit Roles &amp; Permissions. Method return view with the role data you like to edit.</em></p> <h4 id="backend-auth-user-userpasswordcontroller"><a href="#backend-auth-user-userpasswordcontroller" class="header-anchor">#</a> Backend/Auth/User/UserPasswordController</h4> <p><em>This controller return a view with edit method with the given user. In the <code>update()</code> method we updating the user password calling the metod <code>updatePassword()</code> from <code>userRepository</code> and redirect back to users page.</em></p> <h4 id="backend-auth-user-usersessioncontroller"><a href="#backend-auth-user-usersessioncontroller" class="header-anchor">#</a> Backend/Auth/User/UserSessionController</h4> <p><em>Here we are using method <code>clearSession()</code> to logout user from the session or in another words delete the session</em></p> <h4 id="backend-auth-user-userstatuscontroller"><a href="#backend-auth-user-userstatuscontroller" class="header-anchor">#</a> Backend/Auth/User/UserStatusController</h4> <p><em>In this controller is the logic for get Deactivated or Deleted users and managing the status of the user, marking as deactivated or delete the user.</em></p> <h4 id="backend-auth-user-usercontroller"><a href="#backend-auth-user-usercontroller" class="header-anchor">#</a> Backend/Auth/User/UserController</h4> <p><em>This controller return view and response from <code>index()</code> method with all existing users.
<code>create()</code> method return view for creating new user, with all roles &amp; permissions (if are created).
<code>store()</code> method insert data to associated tables.</em></p> <h4 id="frontend-auth-logincontroller"><a href="#frontend-auth-logincontroller" class="header-anchor">#</a> Frontend/Auth/LoginController</h4> <p><em>Has essentiall logic needed to show the login form, validate login fields, check if user is confirmed and logout method.</em></p> <h4 id="frontend-auth-forgotpasswordcontroller"><a href="#frontend-auth-forgotpasswordcontroller" class="header-anchor">#</a> Frontend/Auth/ForgotPasswordController</h4> <p><em>.</em></p> <h4 id="frontend-auth-resetpasswordcontroller"><a href="#frontend-auth-resetpasswordcontroller" class="header-anchor">#</a> Frontend/Auth/ResetPasswordController</h4> <p><em><code>showResetForm()</code> show the form for writing the new password, checking the token in the link.
<code>reset()</code> method invoke the <code>reserPassword()</code> method from the same controller and perform an action updating the password and the timestamp when is changed/update than we return response depending if password has been reset successfully or not</em></p> <h4 id="frontend-auth-passwordexpiredcontroller"><a href="#frontend-auth-passwordexpiredcontroller" class="header-anchor">#</a> Frontend/Auth/PasswordExpiredController</h4> <p><em>.</em></p> <h4 id="frontend-auth-updatepasswordcontroller"><a href="#frontend-auth-updatepasswordcontroller" class="header-anchor">#</a> Frontend/Auth/UpdatePasswordController</h4> <p><em>.</em></p> <h4 id="frontend-user-profilecontroller"><a href="#frontend-user-profilecontroller" class="header-anchor">#</a> Frontend/User/ProfileController</h4> <p><em>This controller has one method <code>update()</code> and use userRepository to perform request to user table in the database, so user can update his profile info and change password</em></p> <h4 id="categorycontroller"><a href="#categorycontroller" class="header-anchor">#</a> CategoryController</h4> <p><em>This controller return response from <code>index()</code> method with all existing categories needed for categories component inside Categories &amp; Tags menu page. Also it has a logic for inserting, updating and deleting category and returning response with created, edited or deleted category(-ies). We are passing the <code>$request</code> and <code>$category</code> model.
<code>store()</code>, <code>update()</code> and <code>destroy()</code> methods return json response with the <code>id</code> and <code>name</code> of created, updated or deleted category(-ies).</em></p> <h4 id="chartcontroller"><a href="#chartcontroller" class="header-anchor">#</a> ChartController</h4> <p><em>This controller has logic for building <code>api</code> for <code>axios</code> calls from chart components that are shown at Dashboard page. The <code>api</code> responses are modified to return proper data object structure as needed for frontend charts components.</em></p> <h4 id="clientcontroller"><a href="#clientcontroller" class="header-anchor">#</a> ClientController</h4> <p><em>In this controller has logic for listing and managing clients data.</em></p> <ul><li><em><code>index()</code> method return index.blade.php view inside <code>backend/auth/client/</code> with needed variables data.</em></li> <li><em><code>management()</code> method return management.blade.php view inside <code>backend/auth/client/</code> with needed variables data.</em></li> <li><em><code>filterClients()</code> building the query logic for filtering the data depending on user interaction. Some of the data(request) send from filters inputs/selects come as array.</em></li> <li><em><code>categoryTag()</code> return json response with existing categories and tags needed</em></li> <li><em><code>update()</code> method is called when user change client data information. Inside has a validation logic with <code>validateClient()</code> method. With <code>sync(Array :id)</code> method at the end we attach/update categories or tags for client passing an array of id's</em></li> <li><em><code>validateClient()</code> method has validation rules for request(ed) fields that user try to update.</em></li></ul> <h4 id="tagcontroller"><a href="#tagcontroller" class="header-anchor">#</a> TagController</h4> <p><em>This controller return response from <code>index()</code> method with all existing tags needed for tags component inside Categories &amp; Tags menu page. Also it has a logic for inserting, updating and deleting tag and returning response with created, edited or deleted tag(s).
<code>store()</code>, <code>update()</code> and <code>destroy()</code> methods return json response with the <code>id</code> and <code>name</code> of created, updated or deleted tag(s).</em></p> <h4 id="locationcontroller"><a href="#locationcontroller" class="header-anchor">#</a> LocationController</h4> <p><em>This controller return response from <code>index()</code> method with data for locations (filtered accordingly) to draw the needed tables.
<code>growth()</code> methods return json response with the similar data in different shape needed for the <code>GrowthLineChartContainer</code> chart and <code>CounterCardComponent</code> component.
Inside this controler data can be pulled from both ways (api and database). Choose what you need commenting/un-commenting both accordingly.
To separate data into regions we use <code>regions.json</code> file that has addresses distributed in 17 regions (+1 that has the rest addresses who doesn't belong in that file)</em></p> <h2 id="models"><a href="#models" class="header-anchor">#</a> Models</h2> <ul><li><p><strong>Category</strong> <em><code>clients()</code> method define belongsToMany relationship with model Client</em></p></li> <li><p><strong>Client</strong></p> <ul><li><em><code>clientInfo()</code> method define hasOne relationship with model ClientInfo</em></li> <li><em><code>clientDetail()</code> method define hasOne relationship with model ClientDetail</em></li> <li><em><code>tags()</code> method define belongsToMany relationship with model Tag</em></li> <li><em><code>categories()</code> method define belongsToMany relationship with model Category</em></li></ul></li> <li><p><strong>ClientDetail</strong> <em><code>client()</code> method define belongsTo relationship with model Client</em></p></li> <li><p><strong>ClientInfo</strong> <em><code>client()</code> method define belongsTo relationship with model Client</em></p></li> <li><p><strong>Tag</strong> <em><code>clients()</code> method define belongsToMany relationship with model Client</em></p></li> <li><p><strong>Location</strong> <em><code>tickets()</code> method define hasMany relationship with model Ticket</em> <em><code>entries()</code> method define hasMany relationship with model Entries</em></p></li> <li><p><strong>Ticket</strong> <em><code>location()</code> method define belongsTo relationship with model Location</em></p></li> <li><p><strong>Entries</strong> <em><code>location()</code> method define belongsTo relationship with model Location</em></p></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/guide/routes.html" class="prev">
        Routes
      </a></span> <span class="next"><a href="/guide/frontend.html">
        Frontend
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.a6c98a68.js" defer></script><script src="/assets/js/2.ded731a5.js" defer></script><script src="/assets/js/11.d11e355d.js" defer></script>
  </body>
</html>
